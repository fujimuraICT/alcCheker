Screen_before As screen:
    LoadingSpinnerColor: =RGBA(98, 100, 167, 1)
    OnVisible: |-
        =//TbTime.Value = Bt;
        Reset(CbCar);
        Reset(Toggle1B);
        Reset(Toggle2B);
        Reset(HowCb);
        Reset(CheckCb);
        Set(popup,false);

    BackColorB As rectangle:
        BorderColor: =RGBA(243, 242, 241, 1)
        BorderStyle: =BorderStyle.None
        BorderThickness: =2
        DisabledFill: =RGBA(255, 234, 166, 1)
        Fill: =RGBA(255, 234, 166, 1)
        FocusedBorderColor: =RGBA(98, 100, 167, 1)
        Height: =150
        HoverFill: =RGBA(255, 234, 166, 1)
        PressedFill: =RGBA(255, 234, 166, 1)
        Width: =Parent.Width
        ZIndex: =1

    LabelUserB As label:
        BorderColor: =RGBA(0, 18, 107, 1)
        Color: =RGBA(0, 0, 0, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        Height: =34
        Size: =16
        Text: ="ユーザー名"
        Width: =128
        X: =39
        Y: =164
        ZIndex: =2

    LbName As ラベル:
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =54
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: |-
            =Concatenate(Last(ForAll(Split(User().FullName," "), {Result: ThisRecord.Value}).Result).Result," ",First(ForAll(Split(User().FullName," "), {Result: ThisRecord.Value}).Result).Result)
        Visible: |
            =true
        Width: =192
        X: =39
        Y: =198
        ZIndex: =3

    LbMail As ラベル:
        AutoHeight: =false
        DisplayMode: =DisplayMode.Edit
        FontSize: =16
        Height: =48
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: =User().Email
        Visible: |
            =true
        Width: =476
        Wrap: =false
        X: =39
        Y: =250
        ZIndex: =4

    LbDate As ラベル:
        Alignment: =Align.Left
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="日付"
        Width: =84
        X: =39
        Y: =LbMail.Y+LbMail.Height+40
        ZIndex: =5

    LbCar As ラベル:
        Alignment: =Align.Left
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="車両"
        Width: =84
        X: =39
        Y: =LbMail.Y+LbMail.Height+120
        ZIndex: =6

    LbTime As ラベル:
        Alignment: =Align.Left
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="時間"
        Width: =84
        X: =39
        Y: =LbMail.Y+LbMail.Height+200
        ZIndex: =7

    DatePickerB As 日付の選択:
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        FontWeight: =FontWeight.Bold
        Height: =70
        IconSize: =24
        InitialPickerDate: |
            =
        OnSelect: =Today()
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        ShowGoToToday: =true
        Value: |
            =tday
        Width: =Max(300,Parent.Width/2.5)
        X: =Parent.Width/2
        Y: =LbMail.Y+LbMail.Height+40
        ZIndex: =8

    "CbCar As 'コンボ ボックス'.pcfdataset":
        AllowSearching: =true
        DefaultSelectedItems: =LookUp(com_col,Title=Text(LbName.Text))
        DisplayMode: =DisplayMode.Edit
        FontSize: =26
        Height: =70
        Items: =com_col
        OnSelect: =
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Width: =Max(300,Parent.Width/2.5)
        X: =Parent.Width/2
        Y: =LbMail.Y+LbMail.Height+120
        ZIndex: =9

        carNo2 As pcfDataField.textualColumn:
            FieldDisplayName: ="carNo"
            FieldName: ="carNo"
            FieldType: ="s"
            FieldVariantName: ="textualColumn"
            Order: =2
            ZIndex: =6

    "TbTime As 'テキスト ボックス'":
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        OnChange: =
        OnSelect: |-
            =UpdateContext({time:Text(Now(),"hh:mm")});
            
            Set(Bt,time)
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Value: |
            =Bt
        Width: =Max(300,Parent.Width/2.5)
        X: =Parent.Width/2
        Y: =LbMail.Y+LbMail.Height+200
        ZIndex: =10

    LbHowB As ラベル:
        Alignment: =Align.Left
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="確認方法"
        Width: =164
        X: =39
        Y: =LbMail.Y+LbMail.Height+440
        ZIndex: =11

    LbDetecB As ラベル:
        Alignment: =Align.Left
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="検知器"
        Width: =128
        X: =39
        Y: =LbMail.Y+LbMail.Height+280
        ZIndex: =12

    LbJudgeB As ラベル:
        Alignment: =Align.Left
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="結果"
        Width: =84
        X: =39
        Y: =LbMail.Y+LbMail.Height+360
        ZIndex: =13

    Toggle1B As toggleSwitch:
        BorderColor: =RGBA(0, 18, 107, 1)
        Color: =RGBA(0, 0, 0, 1)
        FalseFill: =RGBA(128, 130, 133, 1)
        FalseText: ="なし"
        HandleFill: =RGBA(255, 255, 255, 1)
        Height: =70
        Size: =30
        TrueFill: =RGBA(255, 234, 166, 1)
        TrueText: ="あり"
        Width: =Max(300,Parent.Width/2.5)
        X: =Parent.Width/2
        Y: =LbMail.Y+LbMail.Height+280
        ZIndex: =14

    Toggle2B As toggleSwitch:
        BorderColor: =RGBA(0, 18, 107, 1)
        Color: =RGBA(0, 0, 0, 1)
        FalseFill: =RGBA(128, 130, 133, 1)
        FalseText: ="×"
        HandleFill: =RGBA(255, 255, 255, 1)
        Height: =70
        Size: =30
        TrueFill: =RGBA(255, 234, 166, 1)
        TrueText: ="〇"
        Width: =Max(300,Parent.Width/2.5)
        X: =Parent.Width/2
        Y: =LbMail.Y+LbMail.Height+360
        ZIndex: =15

    "HowCb As 'コンボ ボックス'.pcfdataset":
        AllowMultiSelect: =false
        AllowSearching: =true
        DefaultSelectedItems: =If(Or(LbName.Text="杉本 義夫",LbName.Text="小島 宏之",LbName.Text="本山 塁",LbName.Text="西田 敦",LbName.Text="藤村 英明"), Last(FirstN(how_col,1)),Last(FirstN(how_col,3)))
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        Items: =how_col
        OnChange: =
        OnSelect: =
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Width: =Max(300,Parent.Width/2.5)
        X: =Parent.Width/2
        Y: =LbMail.Y+LbMail.Height+440
        ZIndex: =16

        Title2 As pcfDataField.textualColumn:
            FieldDisplayName: ="Title"
            FieldName: ="Title"
            FieldType: ="s"
            FieldVariantName: ="textualColumn"
            Order: =1
            ZIndex: =12

    LbChackB As ラベル:
        Alignment: =Align.Left
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="確認者"
        Width: =128
        X: =39
        Y: =LbMail.Y+LbMail.Height+520
        ZIndex: =17

    "CheckCb As 'コンボ ボックス'.pcfdataset":
        AllowMultiSelect: =false
        AllowSearching: =true
        DefaultSelectedItems: =FirstN(運行安全管理者,1)
        DisplayMode: =DisplayMode.Edit
        FontSize: =30
        Height: =70
        Items: =check_col
        OnSelect: =
        PaddingTop: =0.00
        PCFTeamsTheme: =TeamsTheme.Default
        Width: =Max(300,Parent.Width/2.5)
        X: =Parent.Width/2
        Y: =LbMail.Y+LbMail.Height+520
        ZIndex: =18

        Title3 As pcfDataField.textualColumn:
            FieldDisplayName: ="Title"
            FieldName: ="Title"
            FieldType: ="s"
            FieldVariantName: ="textualColumn"
            Order: =1
            ZIndex: =13

    titleB As ラベル:
        Alignment: =Align.Center
        DisplayMode: =DisplayMode.Edit
        FontSize: =40
        FontWeight: =FontWeight.Bold
        Height: =150
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="運転前"
        Width: =Parent.Width
        X: =0
        Y: =0
        ZIndex: =19

    submitB As icon.Check:
        BorderColor: =RGBA(0, 18, 107, 1)
        Color: =RGBA(0, 18, 107, 1)
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(244, 244, 244, 1)
        Height: =100
        Icon: =Icon.Check
        OnSelect: |-
            =ClearCollect(col,Filter(酒気帯び確認データ,Mid(dateName,12) = (Last(ForAll(Split(User().FullName," "), {Result: ThisRecord.Value}).Result).Result&" "&First(ForAll(Split(User().FullName," "), {Result: ThisRecord.Value}).Result).Result)));
            If(
                UploadedImage1.Image <> SampleImage,
                Set(
                    imageStr,
                    Substitute(
                        JSON(
                            UploadedImage1.Image,
                            JSONFormat.IgnoreBinaryData
                        ),
                        """",
                        ""
                    )
                ),
                Set(
                    imageStr,
                    SampleImage
                )
            );
            UpdateContext(
                {
                    DN: Text(
                        DatePickerB.Value,
                        "yyyy/mm/dd"
                    ) & " " & LbName
                }
            );
            UpdateContext({fVal: fvconv_1.FullToHalf});
            If(
                Find(
                    ":",
                    fVal
                ) = 2,
                UpdateContext(
                    {
                        fVal: Concatenate(
                            "0",
                            fVal
                        )
                    }
                )
            );
            If(
                Len(fVal) < 5,
                UpdateContext(
                    {
                        fVal: Left(
                            fVal,
                            3
                        ) & "0" & Right(
                            fVal,
                            1
                        )
                    }
                )
            );
            If(
                And(
                    Toggle1B.Value = true,
                    Toggle2B.Value = true,
                    Not(IsBlank(TbTime.Value)),
                    Text(HowCb.Selected.Title) <> "",
                    Text(CheckCb.Selected.Title) <> ""
                ),
                If(
                    IsBlank(
                        LookUp(
                            col,
                            dateName = DN
                        ).dateName
                    ),
                    Patch(
                        酒気帯び確認データ,
                        Defaults(酒気帯び確認データ),
                        {
                            dateName: DN,
                            No: Text(CbCar.Selected.carNo),
                            beforeTime: Text(fVal),
                            beforeName: Text(LbName.Text),
                            beforeHow: Text(HowCb.Selected.Title),
                            beforeCheck: Text(CheckCb.Selected.Title),
                            beforeDetec: Text(Toggle1B.Value),
                            company: "藤村組",
                            beforeJudge: Text(Toggle2B.Value),
                            beforeImage: imageStr
                        }
                    );
                    Navigate(
                        Screen_true,
                        ScreenTransition.Fade;
                    ),
                    Set(
                        popup,
                        true
                    )
                ),
                Notify(
                    "未入力欄があります",
                    NotificationType.Error
                )
            )
        Width: =100
        X: =668
        ZIndex: =20

    backB As icon.BackArrow:
        BorderColor: =RGBA(0, 18, 107, 1)
        Color: =RGBA(0, 18, 107, 1)
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(244, 244, 244, 1)
        Height: =100
        Icon: =Icon.BackArrow
        OnSelect: =Navigate(Screen_top,ScreenTransition.Fade)
        Width: =100
        ZIndex: =21

    ButtonByes As ボタン:
        DisplayMode: =DisplayMode.Edit
        FontSize: =26
        Height: =70
        OnSelect: |-
            =Patch(
                酒気帯び確認データ,
                LookUp(
                    酒気帯び確認データ,
                    dateName = DN
                ),
                {
                    dateName: DN,
                    No: Text(CbCar.Selected.carNo),
                    beforeTime: Text(fVal),
                    beforeName: Text(LbName.Text),
                    beforeHow: Text(HowCb.Selected.Title),
                    beforeCheck: Text(CheckCb.Selected.Title),
                    beforeDetec: Text(Toggle1B.Value),
                    company: "藤村組",
                    beforeJudge: Text(Toggle2B.Value),
                    beforeImage: imageStr
                }
            );
            Reset(TbTime);
            Reset(CbCar);
            Reset(DatePickerB);
            Reset(Toggle1B);
            Reset(Toggle2B);
            Reset(HowCb);
            Reset(CheckCb);
            Set(
                popup,
                false
            );
            Navigate(
                Screen_true,
                ScreenTransition.Fade
            )
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="はい"
        Visible: =popup
        Width: =150
        X: =Parent.Width/2-Self.Width/2
        Y: =Parent.Height/3+150
        ZIndex: =27

    ButtonBno As ボタン:
        DisplayMode: =DisplayMode.Edit
        FontSize: =26
        Height: =70
        OnSelect: =Set(popup,false)
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="いいえ"
        Visible: =popup
        Width: =150
        X: =Parent.Width/2-Self.Width/2
        Y: =Parent.Height/3+300
        ZIndex: =28

    LbBackB As ラベル:
        AutoHeight: =true
        DisplayMode: =DisplayMode.Edit
        FontSize: =20
        Height: =50
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="戻る"
        Width: =58
        X: =21
        Y: =100
        ZIndex: =29

    LbSubmitB As ラベル:
        AutoHeight: =false
        DisplayMode: =DisplayMode.Edit
        FontSize: =20
        Height: =46
        PCFTeamsTheme: =TeamsTheme.Default
        Text: ="登録"
        Width: =59
        X: =submitB.X+submitB.Width/2-Self.Width/2
        Y: =100
        ZIndex: =30

    Group5 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =31

        Rectangle3 As rectangle:
            BorderColor: =RGBA(243, 242, 241, 1)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            DisabledFill: =RGBA(233, 232, 231, 1)
            Fill: =RGBA(222, 221, 220, 1)
            FocusedBorderColor: =RGBA(98, 100, 167, 1)
            Height: =400
            HoverFill: =RGBA(233, 232, 231, 1)
            PressedFill: =RGBA(233, 232, 231, 1)
            Visible: =popup
            Width: =Parent.Width*80%
            X: =Parent.Width/2-Self.Width/2
            Y: =Parent.Height/3
            ZIndex: =25

        LbUpdateB As ラベル:
            Alignment: =Align.Center
            Color: =RGBA(49, 50, 83, 1)
            DisplayMode: =DisplayMode.Edit
            FontSize: =26
            Height: =400
            PCFTeamsTheme: =TeamsTheme.Default
            Text: ="指定した日付には運転前データが存在します。上書きしますか？"
            VerticalAlignment: =VerticalAlign.Top
            Visible: =popup
            Width: =Parent.Width*80%
            Wrap: =true
            X: =Parent.Width/2-Self.Width/2
            Y: =Parent.Height/3
            ZIndex: =26

    AddMediaWithImage1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =31

        UploadedImage1 As image:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderThickness: =2
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledFill: =RGBA(0, 0, 0, 0)
            Height: =AddMediaButton1.Height
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverFill: =RGBA(0, 0, 0, 0)
            Image: =If(IsBlank(AddMediaButton1.Media), SampleImage, AddMediaButton1.Media)
            PressedBorderColor: =RGBA(0, 0, 0, 0)
            PressedFill: =RGBA(0, 0, 0, 0)
            RadiusBottomLeft: =3
            RadiusBottomRight: =3
            RadiusTopLeft: =3
            RadiusTopRight: =3
            Visible: =If(HowCb.Selected.Title = "IT",true,false)
            Width: =AddMediaButton1.Width
            X: =AddMediaButton1.X
            Y: =AddMediaButton1.Y
            ZIndex: =32

        AddMediaButton1 As addMedia:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderStyle: =BorderStyle.None
            BorderThickness: =2
            DisabledBorderColor: =RGBA(0, 0, 0, 0)
            DisabledColor: =RGBA(200, 198, 196, 1)
            DisabledFill: =RGBA(243, 242, 241, 1)
            Fill: =RGBA(98, 100, 167, 1)
            Font: =Font.'Segoe UI'
            HoverBorderColor: =RGBA(0, 0, 0, 0)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(98, 100, 167, 1), -10%)
            PressedBorderColor: =ColorFade(RGBA(98, 100, 167, 1), -50%)
            PressedColor: =RGBA(255, 255, 255, 1)
            PressedFill: =ColorFade(RGBA(98, 100, 167, 1), -30%)
            Size: =25
            Text: ="タップまたはクリックしてカメラを起動"
            UseMobileCamera: =true
            Visible: =If(HowCb.Selected.Title = "IT",true,false)
            X: =360
            Y: =937
            ZIndex: =33

    fvconv_1 As fvconv:
        InputText: =TbTime.Value
        ZIndex: =34

